graph TB
    subgraph Props["ðŸ“¥ Props"]
        ScreenProps["VideoAnalysisScreenProps<br/>analysisJobId<br/>videoRecordingId<br/>initialStatus<br/>videoUri"]
    end

    subgraph Screen["ðŸ§  Screen (logic-only)"]
        ScreenHooks["useStatusBar Â· useHistoricalAnalysis Â· useAnalysisState Â· useFeedbackAudioSource Â· useFeedbackCoordinator Â· useAnimationController Â· useGestureController"]
        DerivedProps["Stable props\nvideoState Â· feedback Â· subscription Â· handlers"]
    end

    subgraph Layout["ðŸ“± Layout"]
        VA_Layout["VideoAnalysisLayout\n(native/web)"]
    end

    subgraph Sections["Sections (own the subscriptions)"]
        Player["VideoPlayerSection\nuseVideoPlayer + useAudioControllerLazy\nSubscribes: useVideoPlayerStore,\nuseFeedbackAudioStore,\nuseFeedbackCoordinatorStore,\nusePersistentProgressStore"]
        Feedback["FeedbackSection\nuseFeedbackPanel + command bus\nSubscribes: useFeedbackCoordinatorStore,\nuseFeedbackAudioStore,\nuseFeedbackPanelCommandStore"]
    end

    subgraph Stores["ðŸ—ƒï¸ Zustand"]
        VStore["useVideoPlayerStore"]
        FAStore["useFeedbackAudioStore"]
        FCStore["useFeedbackCoordinatorStore"]
        PPStore["usePersistentProgressStore"]
        CmdStore["useFeedbackPanelCommandStore"]
    end

    ScreenProps --> ScreenHooks
    ScreenHooks --> DerivedProps
    DerivedProps --> VA_Layout
    VA_Layout --> Player
    VA_Layout --> Feedback

    Player --> VStore
    Player --> FAStore
    Player --> FCStore
    Player --> PPStore

    Feedback --> FAStore
    Feedback --> FCStore
    Feedback --> CmdStore

    %% Styling
    classDef props fill:#f5f5f5,stroke:#616161,stroke-width:2px
    classDef screen fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef layout fill:#e0f2f1,stroke:#00695c,stroke-width:2px
    classDef sections fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    classDef stores fill:#fce4ec,stroke:#ad1457,stroke-width:2px

    class ScreenProps props
    class ScreenHooks,DerivedProps screen
    class VA_Layout layout
    class Player,Feedback sections
    class VStore,FAStore,FCStore,PPStore,CmdStore stores

