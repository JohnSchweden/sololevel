graph TD
    %% Define styles first
    classDef state fill:#e3f2fd,stroke:#2196f3,color:#000000
    classDef success fill:#e8f5e8,stroke:#4caf50,color:#000000
    classDef fail fill:#ffebee,stroke:#f44336,color:#000000
    classDef condition fill:#f3e5f5,stroke:#9c27b0,color:#000000
    classDef method fill:#fff3e0,stroke:#ff9800,color:#000000
    classDef command fill:#e8f5e8,stroke:#4caf50,color:#000000

    subgraph "ğŸ“‹ Git History Visualization"
        BEFORE_STATE["BEFORE<br/>main: A â”€ B<br/>feature: A â”€ C â”€ D"]
        FAST_FORWARD_STATE["FAST-FORWARD RESULT<br/>main: A â”€ B â”€ C â”€ D<br/>ğŸš€ Pointer moves forward<br/>âœ… No merge commit"]
        MERGE_COMMIT_STATE["MERGE COMMIT RESULT<br/>main: A â”€ B â”€ M<br/>feature: A â”€ C â”€ D â”€ M<br/>ğŸ”— Creates merge commit<br/>ğŸ“Š Preserves both branches"]
    end

    subgraph "ğŸ¯ Fast-Forward Conditions"
        COND1["âœ… Main has NO new commits<br/>since feature branch created"]
        COND2["âœ… Feature branch is ahead<br/>of main (linear path)"]
        COND3["âœ… No merge conflicts exist"]
    end

    subgraph "âš¡ Merge Method Comparison"
        FF_METHOD["Fast-Forward<br/>ğŸš€ 30-60 seconds<br/>ğŸ“ Linear history<br/>ğŸ¯ No merge commit<br/>âœ… Clean git log"]
        MERGE_METHOD["Merge Commit<br/>ğŸ”µ 2-3 minutes<br/>ğŸ“Š Preserves histories<br/>ğŸ”— Creates merge commit<br/>ğŸ“ˆ Shows boundaries"]
        REBASE_METHOD["Rebase<br/>ğŸ”µ 3-5 minutes<br/>ğŸ“‹ Rewrites history<br/>ğŸ”„ Moves commits<br/>âš ï¸ Changes hashes"]
    end

    subgraph "ğŸš€ Fast-Forward Workflow"
        STEP1["1. Update main<br/>git checkout main<br/>git pull origin main"]
        STEP2["2. Switch to feature<br/>git checkout feature/branch"]
        STEP3["3. Sync if needed<br/>git merge main<br/>(only if main changed)"]
        STEP4["4. Fast-forward merge<br/>git checkout main<br/>git merge feature/branch"]
        STEP5["5. Push result<br/>git push origin main"]
    end

    %% Flow connections
    BEFORE_STATE --> COND1
    COND1 --> COND2
    COND2 --> COND3
    COND3 --> FAST_FORWARD_STATE
    COND3 -.->|"If conditions fail"| MERGE_COMMIT_STATE

    FF_METHOD --> STEP1
    STEP1 --> STEP2
    STEP2 --> STEP3
    STEP3 --> STEP4
    STEP4 --> STEP5

    %% Apply styles
    class BEFORE_STATE state
    class FAST_FORWARD_STATE success
    class MERGE_COMMIT_STATE fail
    class COND1,COND2,COND3 condition
    class FF_METHOD method
    class MERGE_METHOD,REBASE_METHOD method
    class STEP1,STEP2,STEP3,STEP4,STEP5 command
