graph TB
    %% External Users
    User[ğŸ‘¤ User]
    
    %% Client Applications
    subgraph "Client Applications"
        ExpoApp[ğŸ“± Expo App<br/>React Native<br/>iOS/Android]
        NextApp[ğŸŒ Next.js App<br/>Web Platform]
    end
    
    %% Shared Packages
    subgraph "Shared Packages (@my/*)"
        UIPackage[ğŸ¨ @my/ui<br/>Tamagui Components<br/>Cross-platform UI]
        AppPackage[âš™ï¸ @my/app<br/>Business Logic<br/>Screens & Hooks]
        APIPackage[ğŸ”Œ @my/api<br/>Backend Integrations<br/>Supabase Clients]
        ConfigPackage[âš™ï¸ @my/config<br/>Configuration<br/>Environment]
    end
    
    %% State Management
    subgraph "State Management"
        ZustandStore[ğŸ—ƒï¸ Zustand<br/>Client State<br/>Media, Analysis, Profile]
        TanStackQuery[ğŸ“Š TanStack Query<br/>Server State<br/>Caching & Sync]
    end
    
    %% Backend Services
    subgraph "Supabase Backend"
        Auth[ğŸ” Supabase Auth<br/>JWT Authentication<br/>Email/Social Login]
        Database[(ğŸ—„ï¸ PostgreSQL<br/>RLS Enabled<br/>Analyses & Metrics)]
        Storage[ğŸ“ Supabase Storage<br/>Video Files<br/>Raw & Processed]
        Realtime[âš¡ Supabase Realtime<br/>Live Updates<br/>Analysis Progress]
        EdgeFunctions[âš™ï¸ Edge Functions<br/>AI Analysis Pipeline<br/>Deno Runtime]
    end
    
    %% AI Services
    subgraph "AI Analysis Pipeline"
        PoseDetection[ğŸ¤– Pose Detection<br/>MediaPipe/TensorFlow<br/>Movement Analysis]
        VoiceAnalysis[ğŸ¤ Voice Analysis<br/>ASR & Metrics<br/>Speech Processing]
        LLMService[ğŸ§  LLM Service<br/>Text Generation<br/>Feedback Summary]
        TTSService[ğŸ”Š TTS Service<br/>Audio Commentary<br/>SSML Processing]
    end
    
    %% Development Tools
    subgraph "Development & Build"
        Turbo[âš¡ Turbo<br/>Monorepo Orchestration<br/>Build Pipeline]
        Yarn[ğŸ“¦ Yarn 4<br/>Package Management<br/>Workspace Protocol]
        Biome[ğŸ” Biome<br/>Linting & Formatting<br/>Code Quality]
        TypeScript[ğŸ“ TypeScript<br/>Type Safety<br/>Strict Mode]
    end
    
    %% Testing Infrastructure
    subgraph "Testing & Quality"
        Vitest[ğŸ§ª Vitest<br/>Unit Testing<br/>Business Logic]
        Jest[ğŸ¯ Jest<br/>Component Testing<br/>UI Components]
        Playwright[ğŸ­ Playwright<br/>E2E Testing<br/>User Flows]
        Storybook[ğŸ“š Storybook<br/>Component Stories<br/>Design System]
    end
    
    %% User Interactions
    User --> ExpoApp
    User --> NextApp
    
    %% App Dependencies
    ExpoApp --> UIPackage
    ExpoApp --> AppPackage
    ExpoApp --> APIPackage
    NextApp --> UIPackage
    NextApp --> AppPackage
    NextApp --> APIPackage
    
    %% Package Dependencies
    UIPackage --> ConfigPackage
    AppPackage --> UIPackage
    AppPackage --> APIPackage
    APIPackage --> UIPackage
    
    %% State Management Connections
    ExpoApp --> ZustandStore
    NextApp --> ZustandStore
    ExpoApp --> TanStackQuery
    NextApp --> TanStackQuery
    
    %% Backend Connections
    APIPackage --> Auth
    APIPackage --> Database
    APIPackage --> Storage
    APIPackage --> Realtime
    APIPackage --> EdgeFunctions
    
    %% AI Pipeline Flow
    EdgeFunctions --> PoseDetection
    EdgeFunctions --> VoiceAnalysis
    EdgeFunctions --> LLMService
    EdgeFunctions --> TTSService
    
    %% Data Flow
    Storage --> EdgeFunctions
    EdgeFunctions --> Database
    EdgeFunctions --> Storage
    Database --> Realtime
    Realtime --> TanStackQuery
    
    %% Build System
    Turbo --> ExpoApp
    Turbo --> NextApp
    Turbo --> UIPackage
    Turbo --> AppPackage
    Turbo --> APIPackage
    
    Yarn --> Turbo
    Biome --> Turbo
    TypeScript --> Turbo
    
    %% Testing Connections
    Vitest --> AppPackage
    Vitest --> APIPackage
    Jest --> UIPackage
    Playwright --> ExpoApp
    Playwright --> NextApp
    Storybook --> UIPackage
    
    %% Styling
    classDef clientApp fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef sharedPackage fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef stateManagement fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef backend fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef ai fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef devTools fill:#f1f8e9,stroke:#33691e,stroke-width:2px
    classDef testing fill:#e3f2fd,stroke:#0d47a1,stroke-width:2px
    
    class ExpoApp,NextApp clientApp
    class UIPackage,AppPackage,APIPackage,ConfigPackage sharedPackage
    class ZustandStore,TanStackQuery stateManagement
    class Auth,Database,Storage,Realtime,EdgeFunctions backend
    class PoseDetection,VoiceAnalysis,LLMService,TTSService ai
    class Turbo,Yarn,Biome,TypeScript devTools
    class Vitest,Jest,Playwright,Storybook testing
