graph LR
    %% User Journey Flow
    User[ğŸ‘¤ User] --> Record[ğŸ“¹ Record Video]
    Record --> Upload[â¬†ï¸ Upload to Storage]
    Upload --> Analyze[ğŸ¤– AI Analysis]
    Analyze --> Feedback[ğŸ’¬ Get Feedback]
    
    %% System Layers
    subgraph "ğŸ“± Client Apps"
        Mobile[ğŸ“± Expo<br/>iOS/Android]
        Web[ğŸŒ Next.js<br/>Web]
    end
    
    subgraph "âš™ï¸ Shared Code"
        UI[ğŸ¨ @my/ui<br/>Components]
        App[ğŸ“‹ @my/app<br/>Business Logic]
        API[ğŸ”Œ @my/api<br/>Backend Client]
    end
    
    subgraph "â˜ï¸ Supabase Backend"
        Auth[ğŸ” Authentication]
        DB[(ğŸ—„ï¸ Database<br/>Analyses & Metrics)]
        Storage[ğŸ“ File Storage<br/>Videos & Audio]
        Functions[âš™ï¸ Edge Functions<br/>AI Pipeline]
    end
    
    subgraph "ğŸ§  AI Services"
        Pose[ğŸ¤– Pose Detection]
        Voice[ğŸ¤ Voice Analysis]
        LLM[ğŸ’­ Text Generation]
        TTS[ğŸ”Š Audio Commentary]
    end
    
    %% Main Flow
    User --> Mobile
    User --> Web
    Mobile --> UI
    Web --> UI
    UI --> App
    App --> API
    API --> Auth
    API --> Storage
    API --> Functions
    Functions --> Pose
    Functions --> Voice
    Functions --> LLM
    Functions --> TTS
    Functions --> DB
    DB --> API
    API --> App
    App --> UI
    UI --> User
    
    %% Styling
    classDef user fill:#e3f2fd,stroke:#1976d2,stroke-width:3px
    classDef client fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef shared fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef backend fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef ai fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    
    class User user
    class Mobile,Web client
    class UI,App,API shared
    class Auth,DB,Storage,Functions backend
    class Pose,Voice,LLM,TTS ai
