---
description: Automatic rule discovery and application index for monorepo
globs: ["**/*"]
alwaysApply: true
priority: 1
---

# Cursor Rules Index

**AUTOMATICALLY** discover and apply relevant rules based on context, file patterns, and task type.

## Rule Discovery Patterns

### Core Rules (Always Apply)
- **master-monorepo-config**: Base configuration for all monorepo work
- **cursor-rule-analytics**: Track rule usage automatically
- **package-management**: Dependency and workspace management

### Context-Specific Rules

#### Package Management Context
**Triggers**: `package.json`, `yarn.lock`, `turbo.json`, dependency analysis
**Rules to Apply**:
- `package-management`: Dependency validation and workspace operations
- `core/master-monorepo-config`: Core monorepo patterns

#### UI Development Context  
**Triggers**: `packages/ui/**/*`, `**/components/**/*`, UI-related files
**Rules to Apply**:
- `ui/ui-styling-tamagui`: Tamagui component guidelines
- `ui/platform-specific`: Platform-specific UI patterns
- `quality/storybook`: Component documentation
- `core/master-monorepo-config`: Base configuration

#### AI Integration Context
**Triggers**: AI features, video analysis, pose detection, voice processing
**Rules to Apply**:
- `ai/ai-integration`: AI Coach specific integrations
- `ai/ai-state-management`: AI coaching state management
- `ai/media-capture-platform`: Platform-specific media capture
- `core/master-monorepo-config`: Base configuration

#### Backend Development Context
**Triggers**: `packages/api/**/*`, `supabase/**/*`, backend files
**Rules to Apply**:
- `backend/supabase-backend`: Supabase architecture patterns
- `backend/supabase-database`: Database conventions
- `quality/security-best-practices`: Security guidelines
- `core/master-monorepo-config`: Base configuration

#### Feature Development Context
**Triggers**: `packages/app/**/*`, `apps/**/*`, feature files
**Rules to Apply**:
- `features/navigation-expo-router`: Navigation patterns
- `features/data-state-management`: State management
- `features/authentication`: Auth patterns with Supabase
- `features/api-mocking`: Offline/dev flows
- `core/master-monorepo-config`: Base configuration

#### Quality Assurance Context
**Triggers**: `**/*.{test,spec}.*`, testing files, error handling
**Rules to Apply**:
- `quality/testing-unified`: Testing strategies
- `quality/error-handling`: Error handling patterns
- `quality/performance`: Performance optimization
- `quality/debugging`: Systematic debugging workflow
- `quality/codegen-templates`: Standard scaffolds
- `core/master-monorepo-config`: Base configuration

#### Development Workflow Context
**Triggers**: `**/*.{ts,tsx}`, development files
**Rules to Apply**:
- `core/development-workflow`: Development patterns
- `core/typescript-standards`: TypeScript guidelines
- `core/platform-architecture`: Architecture decisions
- `core/github-integration`: GitHub workflow
- `task-lists`: Task management
- `core/master-monorepo-config`: Base configuration

## Auto-Application Logic

### File Pattern Matching
```yaml
# Package management
- package.json, yarn.lock, turbo.json → package-management + core/master-monorepo-config

# UI components  
- packages/ui/**/*, **/components/**/* → ui-styling-tamagui + platform-specific + storybook + core/master-monorepo-config

# AI features
- **/ai/**/* → ai-integration + ai-state-management + media-capture-platform + core/master-monorepo-config

# Backend/API
- packages/api/**/*, supabase/**/* → supabase-backend + supabase-database + security-best-practices + core/master-monorepo-config

# Features/apps
- packages/app/**/*, apps/**/* → navigation-expo-router + data-state-management + authentication + core/master-monorepo-config

# Testing
- **/*.{test,spec}.* → testing-unified + error-handling + performance + debugging + core/master-monorepo-config

# Stories/documentation
- **/*.stories.* → storybook + ui-styling-tamagui + core/master-monorepo-config

# Development
- **/*.{ts,tsx} → development-workflow + typescript-standards + platform-architecture + github-integration + core/master-monorepo-config
```

### Task Context Detection
```yaml
# Dependency analysis
- "dependency", "package", "yarn", "install" → package-management

# UI development
- "component", "ui", "tamagui", "styling" → ui-styling-tamagui + storybook

# AI integration
- "ai", "video", "pose", "voice", "coaching" → ai-integration + ai-state-management + media-capture-platform

# Backend development  
- "supabase", "database", "api", "backend" → supabase-backend + supabase-database + security-best-practices

# Authentication
- "auth", "login", "signup", "session" → authentication

# Navigation
- "navigation", "routing", "expo-router" → navigation-expo-router

# State management
- "zustand", "query", "state" → data-state-management

# Testing
- "test", "spec", "vitest" → testing-unified + debugging

# Performance
- "performance", "optimization" → performance

# Development workflow
- "github", "commit", "pr", "workflow" → github-integration

# Task management
- "task", "todo", "plan" → task-lists

# Mocking
- "mock", "offline", "dev" → api-mocking
```

## Rule Precedence

1. **master-monorepo-config**: Base layer (always first)
2. **cursor-rule-analytics**: Analytics tracking (always second)
3. **Context-specific rules**: Applied based on file/task context
4. **Specialized rules**: Applied for specific patterns

## Conflict Resolution

- **Always apply** `master-monorepo-config` as base
- **Context-specific rules** override base patterns when applicable
- **More specific globs** take precedence over broader patterns
- **Task context** determines rule priority

## Implementation Notes

- Auto-discover rules based on file patterns and task context
- Apply `alwaysApply: true` rules automatically
- Track rule usage via `cursor-rule-analytics`
- Maintain rule precedence and conflict resolution
- Update analytics.md with each rule application

## Chat Integration

**CRITICAL**: Always fetch relevant rules when user asks questions in chat:
- Use `fetch_rules` tool to get context-specific rules
- Apply rules based on user query keywords and file context
- Update analytics.md with rule usage tracking
- Ensure all applicable rules are loaded before responding

## Canonical Task Lists
- Master task index: `docs/TASKS.md`
- Feature-scoped task lists: `docs/tasks/feature-name.md`
- Platform-scoped lists: `docs/tasks/web.md`, `docs/tasks/native.md`