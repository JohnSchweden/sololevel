---
description: Automatic rule discovery and application index for monorepo
alwaysApply: false
---
# Cursor Rules Index

**AUTOMATICALLY** discover and apply relevant rules based on context, file patterns, and task type.

## Rule Discovery Patterns

### Context-Specific Rules

#### Package Management Context
**Triggers**: `package.json`, `yarn.lock`, `turbo.json`, dependency analysis
**Rules to Apply**:
- No additional rules needed (foundation rules provide package management guidance)

#### UI Development Context  
**Triggers**: `packages/ui/**/*`, `**/components/**/*`, UI-related files
**Rules to Apply**:
- `ui/cross-platform-styling`: Parent rule coordinating UI system
  - `ui/theming`: Tamagui tokens and theme system
  - `ui/responsive`: Breakpoints and responsive patterns
  - `ui/mobile-ux`: Touch interactions and mobile patterns
  - `ui/platform-differences`: Web vs native implementations
- `quality/storybook`: Component documentation

#### AI Integration Context
**Triggers**: AI features, video analysis, pose detection, voice processing
**Rules to Apply**:
- `ai/ai-integration`: AI Coach specific integrations
- `ai/ai-state-management`: AI coaching state management
- `ai/media-capture-platform`: Platform-specific media capture

#### Backend Development Context
**Triggers**: `packages/api/**/*`, `supabase/**/*`, backend files
**Rules to Apply**:
- `backend/supabase-backend`: Supabase architecture patterns
- `backend/supabase-database`: Database conventions
- `quality/security-best-practices`: Security guidelines

#### Feature Development Context
**Triggers**: `packages/app/**/*`, `apps/**/*`, feature files
**Rules to Apply**:
- `features/navigation-expo-router`: Navigation patterns
- `features/data-state-management`: State management
- `features/authentication`: Auth patterns with Supabase
- `features/api-mocking`: Offline/dev flows

#### Quality Assurance Context
**Triggers**: `**/*.{test,spec}.*`, testing files, error handling
**Rules to Apply**:
- `quality/testing-unified`: Testing strategies
- `quality/testing-workflow`: Step-by-step TDD guide for creating tests (quality/testing-workflow.mdc)
- `quality/error-handling`: Error handling patterns
- `quality/performance`: Performance optimization
- `quality/debugging`: Systematic debugging workflow
- `quality/codegen-templates`: Standard scaffolds

#### Development Workflow Context
**Triggers**: `**/*.{ts,tsx}`, development files
**Rules to Apply**:
- `core/project-context-architecture`: Project context and architecture understanding
- `core/typescript-standards`: TypeScript guidelines
- `core/github-integration`: GitHub workflow
- `task-lists`: Task management

## Auto-Application Logic

### File Pattern Matching
```yaml
# Package management
- package.json, yarn.lock, turbo.json → analytics-tracking

# UI components  
- packages/ui/**/*, **/components/**/* → cross-platform-styling (+ theming + responsive + mobile-ux + platform-differences) + storybook

# AI features
- **/ai/**/* → ai-integration + ai-state-management + media-capture-platform

# Backend/API
- packages/api/**/*, supabase/**/* → supabase-backend + supabase-database + security-best-practices

# Features/apps
- packages/app/**/*, apps/**/* → navigation-expo-router + data-state-management + authentication

# Testing
- **/*.{test,spec}.* → quality/testing-unified + quality/testing-workflow + quality/error-handling + quality/performance + quality/debugging

# Stories/documentation
- **/*.stories.* → storybook + cross-platform-styling

# Development
- **/*.{ts,tsx} → project-context-architecture + typescript-standards + github-integration
```

### Task Context Detection
```yaml
# Dependency analysis
- "dependency", "package", "yarn", "install" → analytics-tracking

# UI development
- "component", "ui", "tamagui", "styling" → cross-platform-styling + storybook
- "theming", "tokens", "colors" → theming
- "responsive", "breakpoints", "layout" → responsive  
- "mobile", "touch", "gestures" → mobile-ux
- "platform", "web", "native", "shadows" → platform-differences

# AI integration
- "ai", "video", "pose", "voice", "coaching" → ai-integration + ai-state-management + media-capture-platform

# Backend development  
- "supabase", "database", "api", "backend" → supabase-backend + supabase-database + security-best-practices

# Authentication
- "auth", "login", "signup", "session" → authentication

# Navigation
- "navigation", "routing", "expo-router" → navigation-expo-router

# State management
- "zustand", "query", "state" → data-state-management

# Testing
- "test", "spec", "vitest" → quality/testing-unified + quality/testing-workflow + quality/debugging

# Performance
- "performance", "optimization" → performance

# Development workflow
- "github", "commit", "pr", "workflow" → github-integration
- "architecture", "context", "project", "understanding" → project-context-architecture

# Task management
- "task", "todo", "plan" → task-lists

# Mocking
- "mock", "offline", "dev" → api-mocking
```

Rules are automatically applied based on:
- **File patterns** matching the triggers in each context section above
- **Task keywords** in user queries matching the context descriptions
- **Always-apply rules** that provide the foundation layer

## Rule Precedence

1. **Always-apply rules**: `core/monorepo-foundation`, `core/development-operations`, `core/project-context-architecture`, `analytics-tracking`
2. **Context-specific rules**: Applied based on file/task context
3. **Specialized rules**: Applied for specific patterns

## Conflict Resolution

- **Always-apply rules** provide the foundation layer
- **Context-specific rules** override base patterns when applicable
- **More specific globs** take precedence over broader patterns
- **Task context** determines rule priority

## Implementation Notes

- Auto-discover rules based on file patterns and task context
- Apply `alwaysApply: true` rules automatically
- Track rule usage via `analytics-tracking`
- Maintain rule precedence and conflict resolution
- Update analytics.md with each rule application

## Chat Integration

**CRITICAL**: Always fetch relevant rules when user asks questions in chat:
- Use `fetch_rules` tool to get context-specific rules
- Apply rules based on user query keywords and file context
- Update analytics.md with rule usage tracking
- Ensure all applicable rules are loaded before responding

## Canonical Task Lists
- Master task index: `docs/TASKS.md`
- Feature-scoped task lists: `docs/tasks/feature-name.md`
- Platform-scoped lists: `docs/tasks/web.md`, `docs/tasks/native.md`